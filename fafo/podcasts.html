<div id="podcast">
 
 <div id="podcast-container" style="margin: 0px auto;" >
  
  <div id="podcast-player-screen"  style="float: left; width: 400px">
    <img id="sound-gif" src="sound.gif" style="text-align: right; display: none"/>
  </div>

  <div id="podcast-player-playlist" style="float: right; text-align:center; width: 200px;">
      <h4> Podcasts Playlist </h4>
  </div>
  
  <div style="clear: both;"></div>

  <script src="./howler.js"></script>

  <script>
    var myPlayList =
    [
     
      {
        src: 'https://bafybeidafxblileikhlrsrsvuao5lw627qjalmcfy3cbhg2cj3jd5xryrm.ipfs.w3s.link/ipfs/bafybeidafxblileikhlrsrsvuao5lw627qjalmcfy3cbhg2cj3jd5xryrm/69RueduLagon.m4a',
        type: 'audio/m4a',
        poster: 'IMG_0461.png',
        title: '69 rue du lagon St Leu,test'
      },
      {
        src: 'https://download.samplelib.com/mp3/sample-9s.mp3',
        type: 'audio/mp3',
        poster: 'IMG_0461.png',
        title: '9-second melody using background drums'
      }
    ]
  
    $(function() {
      console.log("podcasts player JS looading ...");

      
      for (var i = 0, len = myPlayList.length; i < len; i++) {
          let pod = myPlayList[i];
          let poster = pod['poster'];
          let title = pod['title'];
          $( "#podcast-player-playlist" ).append( '<p track-index="'+i+'" >'+title+'</p>' );
      }

      var podcast = null;
   
      $("#podcast-player-playlist p").on("click", function() {

       if (podcast != null) {
        console.log("stopping current podcast, status: "+podcast.state());
        podcast.stop();
        podcast.unload();
        podcast = null;
       }

       
       let trackIndex = $(this).attr("track-index");
       let pod = myPlayList[parseInt(trackIndex)]
       let podTitle = pod["title"]
       let podSrc = pod["src"]
       let podPoster = pod["poster"]

       let podExt = podSrc.split('.').pop();
       console.log("podcast selected: "+podSrc);
       console.log("podcast source extension: "+podExt)
       console.log("podcast source support: " + Howler.codecs(podExt));
         
       podcast = new Howl({
          src: [podSrc],
          html5: true,
          volume: 0.9,
          onload: function() {
          	console.log("loading podcast ...");
          },
          onplay: function(id) {
          	console.log("playing podcast ...");
            $( "#sound-gif" ).show( "slow", function() {
                console.log("showing podcast gif");
            });
            
          },
          onstop: function(id) {
          	console.log("stopping podcast ...");
            $( "#sound-gif" ).hide( "slow", function() {
                console.log("hiding podcast gif");
            });
            
          },
          onend: function() {
          	console.log("podcast ended");
            Howler.unload();
          },
          onplayerror: function() {
          	console.log("error playing podcast");
            Howler.unload();
          },
          onloaderror: function() {
          	console.log("error loading podcast");
            Howler.unload();
          }
          
      });
       
      podcast.play();
      
    });
 });
</script>

  
</div>

